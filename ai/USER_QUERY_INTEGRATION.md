# ç”¨æˆ·ä¸»åŠ¨æŸ¥è¯¢åŠŸèƒ½ - é›†æˆè¯´æ˜

## âš ï¸ é‡è¦å£°æ˜

**å¦‚æœå…¶ä»–çª—å£ï¼ˆ1-9å·ï¼‰æœªä¸6å·çª—å£åŒæ­¥å®ç°ç”¨æˆ·ä¸»åŠ¨æŸ¥è¯¢åŠŸèƒ½çš„æ¥å£å¯¹æ¥ï¼Œåˆ™ç”±10å·çª—å£è´Ÿè´£è¡¥å…¨æ‰€æœ‰é›†æˆå·¥ä½œã€‚**

## ğŸ“‹ éœ€è¦é›†æˆçš„æ¥å£

### 1. ä»2å·çª—å£è·å–å®æ—¶æ•°æ®
```python
# user_query.py ç¬¬273è¡Œ
async def _fetch_market_data(self, symbol: str) -> Dict[str, Any]:
    # TODO: éœ€è¦ä»2å·çª—å£è·å–å®æ—¶æ•°æ®
    # å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œéœ€è¦æ›¿æ¢ä¸ºï¼š
    from window2.market_data import get_realtime_data
    return await get_realtime_data(symbol)
```

### 2. ä»3å·çª—å£è·å–é“¾ä¸Šå’Œç¤¾äº¤æ•°æ®
```python
# éœ€è¦åœ¨æŸ¥è¯¢æ—¶è·å–ï¼š
- é“¾ä¸Šæ´»åŠ¨æ•°æ®
- ç¤¾äº¤åª’ä½“æƒ…ç»ª
- æ–°é—»äº‹ä»¶
```

### 3. ä»4å·çª—å£è·å–æŠ€æœ¯æŒ‡æ ‡
```python
# éœ€è¦è·å–ï¼š
- RSI, MACD, å¸ƒæ—å¸¦ç­‰æŒ‡æ ‡
- æ”¯æ’‘é˜»åŠ›ä½
- å½¢æ€è¯†åˆ«ç»“æœ
```

### 4. ä»5å·çª—å£è·å–äº¤æ˜“å‘˜æ•°æ®
```python
# çŸ­çº¿æŸ¥è¯¢æ—¶éœ€è¦ï¼š
- é¡¶çº§äº¤æ˜“å‘˜å½“å‰æŒä»“
- è¿‘æœŸæ“ä½œè®°å½•
- è·Ÿå•å»ºè®®
```

### 5. å‘7å·çª—å£å‘é€é£é™©è¯„ä¼°
```python
# ç”¨æˆ·æŸ¥è¯¢åéœ€è¦ï¼š
- å°†å†³ç­–å‘é€ç»™é£æ§ç³»ç»Ÿ
- è·å–é£é™©å®¡æ ¸ç»“æœ
```

### 6. å‘8å·çª—å£å‘é€é€šçŸ¥
```python
# æŸ¥è¯¢å®Œæˆåï¼š
- å‘é€æŸ¥è¯¢ç»“æœé€šçŸ¥
- é‡è¦å†³ç­–æ¨é€
```

## ğŸ”§ é›†æˆæ–¹å¼

### æ–¹æ¡ˆAï¼šç›´æ¥å‡½æ•°è°ƒç”¨
```python
# åœ¨user_query.pyä¸­å¯¼å…¥å…¶ä»–çª—å£æ¨¡å—
from window2.market_data import MarketDataProvider
from window3.chain_social import ChainSocialAnalyzer
from window4.technical import TechnicalIndicators
from window5.trader_monitor import TraderMonitor

class UserQueryHandler:
    def __init__(self):
        self.market_data = MarketDataProvider()
        self.chain_social = ChainSocialAnalyzer()
        self.technical = TechnicalIndicators()
        self.trader_monitor = TraderMonitor()
```

### æ–¹æ¡ˆBï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ¨èï¼‰
```python
# ä½¿ç”¨Redisæˆ–RabbitMQ
import redis

class UserQueryHandler:
    def __init__(self):
        self.redis = redis.Redis()
    
    async def _fetch_market_data(self, symbol: str):
        # å‘é€è¯·æ±‚åˆ°2å·çª—å£
        request_id = str(uuid.uuid4())
        self.redis.publish('market_data_request', json.dumps({
            'request_id': request_id,
            'symbol': symbol,
            'requester': 'window6'
        }))
        
        # ç­‰å¾…å“åº”
        response = await self._wait_for_response(request_id)
        return response
```

## ğŸ“Š ç”¨æˆ·æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·å‘èµ·æŸ¥è¯¢
    â†“
6å·çª—å£æ¥æ”¶è¯·æ±‚
    â†“
æ”¶é›†æ‰€éœ€æ•°æ®ï¼š
â”œâ”€â”€ 2å·çª—å£ï¼šå¸‚åœºæ•°æ®
â”œâ”€â”€ 3å·çª—å£ï¼šé“¾ä¸Š/ç¤¾äº¤
â”œâ”€â”€ 4å·çª—å£ï¼šæŠ€æœ¯æŒ‡æ ‡
â””â”€â”€ 5å·çª—å£ï¼šäº¤æ˜“å‘˜æ•°æ®
    â†“
æ„å»ºæŸ¥è¯¢ä¸Šä¸‹æ–‡
    â†“
è°ƒç”¨Claude API
    â†“
è§£æAIå“åº”
    â†“
å‘é€ç»“æœï¼š
â”œâ”€â”€ 7å·çª—å£ï¼šé£æ§å®¡æ ¸
â”œâ”€â”€ 8å·çª—å£ï¼šç”¨æˆ·é€šçŸ¥
â””â”€â”€ è¿”å›ç»™ç”¨æˆ·
```

## ğŸ¯ 10å·çª—å£çš„è¡¥å…¨è´£ä»»

å¦‚æœåœ¨ç³»ç»Ÿé›†æˆæ—¶å‘ç°ä»¥ä¸‹æƒ…å†µï¼Œ10å·çª—å£éœ€è¦è¡¥å…¨ï¼š

1. **æ•°æ®è·å–æ¥å£ç¼ºå¤±**
   - å®ç°ç»Ÿä¸€çš„æ•°æ®è·å–å±‚
   - ä¸ºæ¯ä¸ªçª—å£åˆ›å»ºæ•°æ®é€‚é…å™¨

2. **é€šä¿¡æœºåˆ¶æœªå»ºç«‹**
   - æ­å»ºæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ
   - å®ç°çª—å£é—´RPCè°ƒç”¨

3. **æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€**
   - åˆ›å»ºæ•°æ®è½¬æ¢å±‚
   - ç»Ÿä¸€å„çª—å£çš„æ•°æ®æ ¼å¼

4. **é”™è¯¯å¤„ç†ä¸å®Œå–„**
   - å®ç°é™çº§ç­–ç•¥
   - æ·»åŠ é‡è¯•æœºåˆ¶

## ğŸ“ éªŒæ”¶æ ‡å‡†

ç”¨æˆ·ä¸»åŠ¨æŸ¥è¯¢åŠŸèƒ½å¿…é¡»æ»¡è¶³ï¼š

- [ ] 8ç§æŸ¥è¯¢ç±»å‹å…¨éƒ¨å¯ç”¨
- [ ] å“åº”æ—¶é—´ < 30ç§’
- [ ] æ•°æ®æ¥æºå®Œæ•´ï¼ˆ2-5å·çª—å£ï¼‰
- [ ] é£æ§å®¡æ ¸é€šè¿‡ï¼ˆ7å·çª—å£ï¼‰
- [ ] é€šçŸ¥å‘é€æˆåŠŸï¼ˆ8å·çª—å£ï¼‰
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] é™çº§ç­–ç•¥æœ‰æ•ˆ

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **ä¼˜å…ˆçº§**: ç”¨æˆ·ä¸»åŠ¨æŸ¥è¯¢åº”è¯¥æœ‰è¾ƒé«˜ä¼˜å…ˆçº§
2. **æˆæœ¬æ§åˆ¶**: é¿å…ç”¨æˆ·é¢‘ç¹æŸ¥è¯¢å¯¼è‡´æˆæœ¬å¤±æ§
3. **ç¼“å­˜ç­–ç•¥**: ç›¸åŒæŸ¥è¯¢5åˆ†é’Ÿå†…ä½¿ç”¨ç¼“å­˜
4. **å¹¶å‘é™åˆ¶**: åŒä¸€ç”¨æˆ·åŒæ—¶åªèƒ½æœ‰1ä¸ªæŸ¥è¯¢
5. **æƒé™æ§åˆ¶**: æŸäº›é«˜çº§æŸ¥è¯¢éœ€è¦æƒé™éªŒè¯

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é›†æˆé—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- 6å·çª—å£ï¼šAIå†³ç­–ç³»ç»Ÿ
- 10å·çª—å£ï¼šç³»ç»Ÿé›†æˆè´Ÿè´£äºº

---

**é‡è¦æé†’ï¼šæ­¤åŠŸèƒ½æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ï¼Œå¿…é¡»ç¡®ä¿å®Œæ•´å®ç°ï¼**