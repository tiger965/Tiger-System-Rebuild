# Gmail邮件通知设置指南

## 📧 配置Gmail邮件通知

### 1. 获取应用专用密码

由于Gmail的安全策略，需要使用应用专用密码而不是账户密码。

#### 步骤：

1. **登录Google账户**
   - 访问: https://myaccount.google.com/
   - 使用账号: a368070666@gmail.com

2. **启用两步验证**（如果还没有启用）
   - 进入"安全性"设置
   - 找到"两步验证"
   - 按照提示启用

3. **生成应用专用密码**
   - 在"安全性"页面
   - 找到"应用专用密码"（在两步验证下方）
   - 点击"应用专用密码"
   - 选择应用: "邮件"
   - 选择设备: "其他（自定义名称）"
   - 输入名称: "Tiger系统"
   - 点击"生成"
   - **复制生成的16位密码**（只显示一次！）

4. **配置密码**
   ```python
   # 编辑 notification_system.py
   # 找到 EmailNotifier 类中的配置
   'password': '这里填入16位应用密码',  # 例如: 'abcd efgh ijkl mnop'
   ```

### 2. 测试邮件发送

```bash
# 运行测试
cd /mnt/c/Users/tiger/TigerSystem
python3 test_email.py
```

### 3. 常见问题

#### Q: 提示"认证失败"
- 确认使用的是应用专用密码，不是账户密码
- 确认两步验证已启用
- 密码中的空格可以保留也可以去掉

#### Q: 提示"不安全的应用"
- 使用应用专用密码就不会有这个问题
- 不要启用"允许不够安全的应用"选项

#### Q: 发送失败
- 检查网络连接
- 确认端口587未被防火墙阻止
- 尝试使用465端口（SSL）

### 4. 配置文件位置

- 通知配置: `config/notification_config.yaml`
- 通知系统: `notification_system.py`

### 5. 邮件通知功能

系统支持以下类型的邮件通知：

1. **交易信号** - 买入/卖出信号
2. **系统警报** - 风险预警、异常检测
3. **日常报告** - 收益统计、运行状态
4. **紧急通知** - 系统故障、重大事件

### 6. 优先级设置

- **critical（紧急）**: 立即发送，多次重试
- **high（高）**: 重要信号，2次重试
- **medium（中）**: 普通通知，1次重试
- **low（低）**: 信息记录，不重试

### 7. 邮件模板

邮件使用HTML格式，包含：
- 格式化的表格
- 颜色标记（买入绿色，卖出红色）
- Tiger系统签名
- 时间戳

### 8. 安全建议

1. **不要**在代码中硬编码密码
2. **定期**更换应用专用密码
3. **使用**环境变量存储敏感信息
4. **启用**Gmail的异常活动提醒

### 9. 批量发送限制

Gmail限制：
- 每天最多500封邮件（个人账户）
- 每分钟最多30封
- 单封邮件最多500个收件人

### 10. 备用方案

如果Gmail不可用，可以使用：
- QQ邮箱（需要授权码）
- 163邮箱（需要授权码）
- Outlook邮箱
- 企业邮箱

---

## 快速配置命令

```bash
# 1. 设置密码（获取应用专用密码后）
sed -i "s/'password': ''/'password': '你的16位密码'/g" notification_system.py

# 2. 测试邮件
python3 -c "
from notification_system import NotificationSystem
n = NotificationSystem()
n.send_trading_signal('BTC/USDT', 120000, 'BUY', '测试信号')
"

# 3. 查看日志
tail -f logs/notifications.log
```

---

**重要**: 请妥善保管应用专用密码，不要分享或提交到Git仓库！